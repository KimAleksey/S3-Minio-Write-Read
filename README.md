# üìå Pet-–ø—Ä–æ–µ–∫—Ç. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö NYC Taxi –≤ PostgreSQL —á–µ—Ä–µ–∑ S3 - Minio.

## üíª –ß—Ç–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ
–ü—Ä–æ–µ–∫—Ç –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–µ—Ä–µ–≤–æ–∑–∫–∞—Ö NYC Taxi.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç S3-Minio, PostgreSQL, DuckDB.
- ‚úîÔ∏è Docker —Å–±–æ—Ä–∫–∞.
- ‚úîÔ∏è –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ URL –≤ S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
- ‚úîÔ∏è –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DuckDB.
- ‚úîÔ∏è –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ secrets –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ Minio, PostgreSQL.

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ –ø–µ—Ä–µ–≤–æ–∑–∫–∞—Ö NYC Taxi –≤ PostgreSQL.
–ü—Ä–æ–µ–∫—Ç:
- ‚úîÔ∏è –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ URL –ø–æ-–º–µ—Å—è—á–Ω–æ –∑–∞ 2025 –≥–æ–¥.
- ‚úîÔ∏è –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ bucket S3-like —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ - Minio.
- ‚úîÔ∏è –§–∞–π–ª—ã –∏–∑ S3 —Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ DataFrame —á–µ—Ä–µ–∑ DuckDB.
- ‚úîÔ∏è –í DataFrame –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É PostgreSQL.
- ‚úîÔ∏è DataFrame –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ PostgreSQL —á–µ—Ä–µ–∑ DuckDB.
- ‚úîÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ UPSERT, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–∫–∞—Ö.


## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```md
S3-Minio-Write-Read/
‚îú‚îÄ‚îÄ conf/
‚îÇ   ‚îî‚îÄ‚îÄ .env                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ (–∫–ª—é—á–∏, endpoint)
‚îú‚îÄ‚îÄ main.py                      # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ README.md                    # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .python-version              # –í–µ—Ä—Å–∏—è Python
‚îú‚îÄ‚îÄ pyproject.toml               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ uv.lock                      # –¢–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ docker-compose.yml (–æ–ø—Ü.)    # –°–±–æ—Ä–∫–∞ MinIO + related –æ–∫—Ä—É–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
‚îú‚îÄ‚îÄ tests/                       # –¢–µ—Å—Ç—ã (unit/integration), –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ
‚îÇ   ‚îî‚îÄ‚îÄ test_minio.py
‚îú‚îÄ‚îÄ utils/                       # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ creds_utils.py           # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ duckdb_utils.py          # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DuckDB
‚îÇ   ‚îî‚îÄ‚îÄ s3_minio_utils.py        # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Minio
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/KimAleksey/S3-Minio-Write-Read.git
cd S3-Minio-Write-Read
```

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install --upgrade pip && \
pip install uv && \
uv venv activate && \
uv install
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Docker
```bash
docker compose up -d
```

## üßë‚Äçüíª–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Access key –≤ Minio
–ó–∞–ø—É—Å—Ç–∏—Ç—å Minio: http://localhost:9001
–°–æ–∑–¥–∞—Ç—å access key –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å access, secret keys.

### –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DB
–í –ø–∞–ø–∫–µ config —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env.
–ï—Å–ª–∏ –Ω–µ –º–µ–Ω—è–ª–∏ docker-compose, —Ç–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º:
```text
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=VYqUzLWJXBvXrY6btIrq
MINIO_SECRET_KEY=g72qqNCokjxHnXjTSdmQkPsQOdRydcl8bPF3W2Qz
POSTGRES_HOST=localhost
POSTGRES_DB=postgres
POSTGRES_PORT=5434
POSTGRES_LOGIN=postgres
POSTGRES_PASSWORD=postgres
```
–ï—Å–ª–∏ –ø–æ–º–µ–Ω—è–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã, –Ω–æ –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∏—Ö –≤ —Ç–µ–∫—Å—Ç–µ –≤—ã—à–µ –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–∞–π–ª .env.

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
python -m main
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ DB Postgres
–ß—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ DB —á–µ—Ä–µ–∑ DBeaver (–Ω–∞–ø—Ä–∏–º–µ—Ä).
–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã:
```text
Connection Type = Postgres
Description = Postgres
Host = localhost
Database = postgres
Login = postgres
Password = postgres
Port = 5434
```